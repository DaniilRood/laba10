@startuml
title Процесс прикрепления научного сотрудника к кафедре

start
:Декан выбирает сотрудника;
:Выбирает целевую кафедру;

partition Проверка данных {
  if (Сотрудник уже прикреплен к кафедре?) then (да)
    :Показать текущие кафедры;
    if (Добавить еще одну кафедру?) then (да)
      :Разрешить множественное прикрепление;
    else (нет)
      :Предложить перевести сотрудника;
      if (Сотрудник согласен?) then (да)
        :Удалить с предыдущей кафедры;
      else (нет)
        stop
      endif
    endif
  else (нет)
    :Проверить квалификацию сотрудника;
  endif
  
  if (Квалификация соответствует кафедре?) then (нет)
    :Отказать в прикреплении;
    note right: Уведомить декана о причине
    stop
  else (да)
    :Записать в журнал проверок;
  endif
}

partition Прикрепление {
  :Создать связь сотрудник-кафедра;
  :Обновить список сотрудников кафедры;
  :Обновить профиль сотрудника;
  
  fork
    :Уведомить сотрудника по email;
  fork again
    :Уведомить заведующего кафедрой;
  fork again
    :Обновить статистику факультета;
  end fork
  
  :Записать в системный журнал;
}

:Отправить подтверждение декану;
note right: Процесс завершен успешно
stop

@enduml